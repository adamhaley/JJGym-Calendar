<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0"  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:import href="import.xsl" />
<xsl:template match="resources">
	<div class="caption">
		<span>
			Edit <xsl:value-of select="/page/request/res" /><xsl:text>  </xsl:text> <xsl:value-of select="/page/request/id" />
		</span>
	</div>
	<br /><br />
        <script>
	  // Define the id for the thing we're updating. This may get assigned later of course.
	  formid = '<xsl:value-of select="/page/request/id" />';
	  queryString = '?c=commit_resource_property&amp;res=<xsl:value-of select="/page/request/res" />&amp;prop=';
	</script>

	<xsl:apply-templates select="//prototype/child::*[edit='1']" />
</xsl:template>

<xsl:template match="//prototype/child::*" >
        <xsl:variable name="name" select="name()" />
        <xsl:variable name="class" select="parent::*/@class" />
        <xsl:call-template name="inplaceeditor">
 	      <xsl:with-param name="node" select="//resource[@class=$class]/child::*[name()=$name]" />
        </xsl:call-template>
</xsl:template>
</xsl:stylesheet>
